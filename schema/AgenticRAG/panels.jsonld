{
  "@context": "https://huijoohwee.github.io/schema/AgenticRAG/v1/context.jsonld",
  "@id": "rag:Panel",
  "@type": "rdfs:Class",
  "schemaVersion": "1.0.7",
  "rdfs:comment": [
    {
      "@value": "Defines reusable panel UI surfaces. Controls that combine icons and text must use stable alignment primitives (inline-flex with centered alignment) and shared icon baseline rules to prevent visual drift across themes and density settings.",
      "@language": "en-us"
    },
    {
      "@value": "定义可复用的面板 UI 表面。图标与文本组合控件必须使用稳定的对齐原语（inline-flex 居中对齐）与共享图标基线规则，避免在主题与密度设置下出现视觉漂移。",
      "@language": "zh-cn"
    }
  ],
  "rdfs:label": [
    { "@value": "Panel", "@language": "en-us" },
    { "@value": "面板", "@language": "zh-cn" }
  ],
  "panelInteractionContracts": {
    "markdownSsotSectionHeader": [
      {
        "@value": "Markdown Editor/Viewer/Presentation must share one-and-only Markdown Section Header implementation. Mode switches may change enabled/disabled state but must not introduce alternate header variants or different button sets.",
        "@language": "en-us"
      },
      {
        "@value": "Markdown Editor/Viewer/Presentation 必须共享唯一的 Markdown 区域头部实现。模式切换只允许改变启用/禁用状态，不得引入不同的头部变体或不同的按钮集合。",
        "@language": "zh-cn"
      }
    ],
    "markdownSsotSidebarStructure": [
      {
        "@value": "Markdown Contents sidebar uses a single SSOT DOM structure (aside/header/nav/sections) with shared micro-label typography. Sidebar section headers are typography-only and must not render action menus; source file actions belong to the section header area only when they are part of the canonical SSOT header contract.",
        "@language": "en-us"
      },
      {
        "@value": "Markdown Contents 侧边栏必须使用唯一的 SSOT DOM 结构（aside/header/nav/sections）并共享微标签排版。侧边栏分区标题仅用于排版显示，不得渲染动作菜单；Source Files 动作应归属于规范的 SSOT 头部契约。",
        "@language": "zh-cn"
      }
    ],
    "markdownRightClickShowOnIn": [
      {
        "@value": "Right Click opens the app-level \"Show on/in …\" toolbar at the exact pointer position; avoid Monaco default context menus so behavior is consistent across Editor/Viewer/Presentation.",
        "@language": "en-us"
      },
      {
        "@value": "右键在指针精确位置打开应用级 \"Show on/in …\" 工具条；避免使用 Monaco 默认菜单以保证 Editor/Viewer/Presentation 行为一致。",
        "@language": "zh-cn"
      }
    ],
    "bottomPanelFlowTab": [
      {
        "@value": "BottomPanel includes a Flow tab adjacent to Status. ui-path-0: Source File click commits GraphData and D3 renders; Flow button opens BottomPanel and Flow renders the same GraphData in a read-only ReactFlow overview plus Graph Data Table (Nodes/Edges scope). Placement must reuse the host layout position cache (or node x/y) and never inject demo data.",
        "@language": "en-us"
      },
      {
        "@value": "BottomPanel 包含一个紧邻 Status 的 Flow 标签页。ui-path-0：点击 Source File 提交 GraphData 并由 D3 渲染；点击 Flow 打开 BottomPanel 并以只读方式用 ReactFlow 渲染同一份 GraphData（含 Graph Data Table：Nodes/Edges scope）。位置必须复用宿主布局位置缓存（或节点 x/y），禁止注入演示数据。",
        "@language": "zh-cn"
      }
    ],
    "toolbarEditorWorkspaceToggle": [
      {
        "@value": "Toolbar includes an Editor button left of Status. Clicking Editor toggles a VS Code-like embedded editor workspace that reuses the canonical Markdown Workspace SSOT and shows a Canvas preview via an iframe URL param contract (e.g. `/?kgPreview=1`) that forces preview-only rendering (no toolbar/panels) to prevent recursion and cross-mode interference. The editor pane may switch between Markdown and a lightweight Graph Table section; selection and focus remain SSOT-aligned.",
        "@language": "en-us"
      },
      {
        "@value": "Toolbar 在 Status 左侧包含 Editor 按钮。点击 Editor 切换到类 VS Code 的内嵌编辑工作区：复用规范的 Markdown Workspace SSOT，并通过 iframe + URL 参数契约（如 `/?kgPreview=1`）强制预览仅渲染（无工具栏/面板），以防递归与跨模式干扰。编辑区可在 Markdown 与轻量 Graph Table 间切换；选择与焦点需保持 SSOT 对齐。",
        "@language": "zh-cn"
      }
    ],
    "editorWorkspaceGraphTable": [
      {
        "@value": "Editor workspace may include a Graph Table section for inspecting the active GraphData. It must use semantic HTML (header/nav/form/table/thead/tbody/th/td), a toolbar for fields/filter/group/sort/row height, and colgroup-based column resizing. Split panes use a vertical hr separator with pointer-drag resize and persisted widths; avoid scroll-jump loops when syncing selection with preview and TOC.",
        "@language": "en-us"
      },
      {
        "@value": "Editor 工作区可包含用于查看当前 GraphData 的 Graph Table 区域。必须使用语义化 HTML（header/nav/form/table/thead/tbody/th/td），并提供字段/过滤/分组/排序/行高工具条与基于 colgroup 的列宽调整。分栏使用可拖拽的垂直 hr 分隔并持久化宽度；与预览与 TOC 同步选择时需避免滚动跳动循环。",
        "@language": "zh-cn"
      }
    ],
    "recordInspectorSsot": [
      {
        "@value": "Record/Selection Inspector (dl/header + field inputs) must be a single host-owned SSOT component reused across Graph Table and the Canvas Floating Panel Inspector view (no legacy right SidePanel). When Flow Editor is the active 2D renderer, its inspector must be consolidated into the same Floating Panel Inspector surface (portal slot) rather than rendering a separate inspector panel.",
        "@language": "en-us"
      },
      {
        "@value": "Record/Selection Inspector（dl/header + 字段输入）必须是宿主唯一的 SSOT 组件，并在 Graph Table 与 Canvas 浮动面板（Floating Panel）的 Inspector 视图中复用（禁止遗留右侧 SidePanel）。当 Flow Editor 为当前 2D 渲染器时，其 Inspector 必须合并到同一 Floating Panel Inspector 表面（portal slot），禁止渲染独立的 Inspector 面板。",
        "@language": "zh-cn"
      }
    ],
    "floatingPanelShellSsot": [
      {
        "@value": "Floating Panel (tool menu) is the only SSOT shell primitive for Canvas panels (semantic structure, header/body structure, and theming). It hosts Props Panel + Inspector/Chat/Geo views and forbids any legacy right SidePanel. Only mount the active view to forbid hidden background work.",
        "@language": "en-us"
      },
      {
        "@value": "Floating Panel（工具菜单）是 Canvas 面板唯一的 SSOT 壳层原语（语义结构、头/体结构、主题）。它承载 Props Panel + Inspector/Chat/Geo 视图，并禁止任何遗留右侧 SidePanel。只允许挂载当前激活视图，禁止隐藏面板后台运行。",
        "@language": "zh-cn"
      }
    ],
    "activeGraphRenderViewSsot": [
      {
        "@value": "All render surfaces (Editor workspace, Graph Data Table, Graph Fields, Selection Inspector (Record Inspector), EXPLORER projections, Canvas Preview, Canvas D3/Flow/2D/3D, Document Mode, and Geospatial 2D/3D) must consume the same SSOT-derived active graph render view. Derivation order: keyword base → optional frontmatter Mermaid filter (document mode only) → optional group collapse (`collapsedGroupIds`). Forbid per-surface re-derivation and drift. Graph Table persistence must reflect this derived view (including collapsed groups) and be validated with a bounded host test.",
        "@language": "en-us"
      },
      {
        "@value": "所有渲染表面（Editor 工作区、Graph Data Table、Graph Fields、Selection Inspector（Record Inspector）、EXPLORER 投影、Canvas Preview、Canvas D3/Flow/2D/3D、Document Mode、Geospatial 2D/3D）必须消费同一份 SSOT 推导的 active graph render view。推导顺序：keyword 基础图 → 可选 frontmatter Mermaid 过滤（仅 document mode）→ 可选 group collapse（`collapsedGroupIds`）。禁止各表面自行二次推导与漂移。Graph Table 的持久化结果必须反映该推导视图（包含 collapsed groups），并通过有界的 host 测试验证。",
        "@language": "zh-cn"
      }
    ],
    "spreadsheetGridStorageBackend": [
      {
        "@value": "Spreadsheet grid uses AG Grid for rich Airtable-like interactions and RxDB+Dexie as the local-first persistence layer. Forbid hosted backends and registration/auth flows. Stream row/column changes from RxDB and avoid re-render churn by keeping stable row ids and column ids.",
        "@language": "en-us"
      },
      {
        "@value": "Spreadsheet 表格使用 AG Grid 提供类 Airtable 的交互能力，并使用 RxDB+Dexie 作为本地优先的持久化层。禁止托管后端与注册/认证流程。行/列变更应从 RxDB 流式推送，并通过稳定的 rowId/columnId 避免渲染抖动。",
        "@language": "zh-cn"
      }
    ]
  }
}
