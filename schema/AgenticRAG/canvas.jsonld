{
  "@context": "https://huijoohwee.github.io/schema/AgenticRAG/v1/context.jsonld",
  "@id": "rag:Canvas",
  "@type": "rdfs:Class",
  "schemaVersion": "1.0.2",
  "rdfs:comment": [
    {
      "@value": "Defines an interactive graph canvas surface where presentation toggles update layers without unnecessary re-layout. Canvas keeps inactive 2D/3D renderer components mounted while pausing simulations and caching positions to prevent drift when switching render mode. Render layers follow strict Z-ordering (Clusters < Links < Nodes < Port Handles < Labels). Node shape presentation supports circle/rect/diamond/hex; schema.nodeShapes and node properties (visual:shape, visual:width, visual:height) can override global nodeShapeMode without forcing re-layout. Labels remain anchored and avoid fly-away offsets, including ports-aware edge labels and per-cluster font-aware labels. Long labels (>20 words, excluding markdown heading layers hn) are clamped with ellipsis and expanded via shared hover tooltips; heading layer labels never ellipsize. Structured radial layout recomputes on entry unless a valid cache exists. Tick rendering caches node geometry and gates expensive forces at low alpha to protect the frame budget. Rich media panels align dimensionally with standard rectangular nodes and are controlled via a view-only toggle (Rich Media). Rich Media opacity composes with graph layer opacity (mediaNodeOpacity × layerOpacity), and media-specific opacity rules apply only while Rich Media is enabled; media panel backgrounds tint using the node’s base fill so they stay aligned with cluster palettes. Media sources are sanitized and normalized (e.g. GitHub blob URLs → raw) before proxying to avoid broken placeholders. Camera behavior supports Pin to View, preserving the current transform across graph updates, presentation toggles, and viewport resizes without jump. Typography alignment is standardized: SVG labels use consistent baseline alignment and default anchoring respects signed label offsets to avoid node overlap. Canvas can switch between document-structure and keyword modes; derived keyword graphs are cached by stable text hash and layout caches are isolated across (semanticMode, frontmatterMode, layoutMode, renderMode). Cluster is the SSOT term (aliases: graph layer, Mermaid subgraph, community, group). When plugins are used (for example curation or geospatial overlays), ownership boundaries must be explicit: hosts orchestrate pipeline/state while plugins own UI surfaces; cross-repo imports must occur only via declared package entrypoints (no sibling source-relative imports), and persistence keys must be namespaced and centrally defined to avoid collisions.",
      "@language": "en-us"
    },
    {
      "@value": "定义交互式图画布表面：展示开关仅更新渲染图层，避免不必要的重布局；画布保持未激活的 2D/3D 渲染组件挂载，但会暂停模拟并缓存位置，避免切换渲染模式时产生漂移；渲染图层遵循严格的Z轴顺序（簇 < 连线 < 节点 < 端口 < 标签）；节点形状展示支持 circle/rect/diamond/hex；可通过 schema.nodeShapes 与节点属性（visual:shape、visual:width、visual:height）覆盖全局 nodeShapeMode，且不强制重布局。标签保持锚定并避免飞离，包括端口感知的边标签与按簇字体大小对齐的簇标签；长标签（超过20个词，markdown 标题层 hn 除外）在画布中用省略号截断，并通过共享悬停提示完整展开；标题层标签永不省略；结构化的径向布局在进入时重算（除非存在有效缓存）；tick 渲染缓存节点几何信息，并在 alpha 较低时抑制昂贵的力以保护帧预算；富媒体面板尺寸与标准矩形节点保持对齐，并通过“Rich Media”作为纯展示开关控制（view-only）。Rich Media 透明度会与图层透明度组合（mediaNodeOpacity × layerOpacity），且媒体相关的透明度规则仅在 Rich Media 开启时生效；富媒体面板背景会按节点基础填充色做轻度着色，以与簇/子图配色保持一致。媒体源会在代理前进行清洗与归一化（例如 GitHub blob 链接转换为 raw），避免出现破损占位符。相机行为支持 Pin to View：在图更新、展示切换与视口尺寸变化时保持当前变换，不产生跳动。排版对齐标准化：SVG 标签使用一致的基线对齐，且默认锚点根据标签偏移的正负号选择，避免与节点重叠。画布可在文档结构模式与关键词模式间切换；关键词派生图可按稳定文本哈希缓存，并隔离不同模式下的布局缓存（semanticMode, frontmatterMode, layoutMode, renderMode）。簇（Cluster）是术语 SSOT（别名：graph layer、Mermaid subgraph、community、group）。当使用插件（例如策展或地理空间叠加层）时，必须显式约束所有权边界：宿主负责流水线/状态编排，插件负责 UI 表面；跨仓库引用只允许通过声明的包入口（禁止 sibling 源码相对路径导入），持久化 key 必须集中定义并做命名空间隔离以避免冲突。",
      "@language": "zh-cn"
    }
  ],
  "rdfs:label": [
    { "@value": "Canvas", "@language": "en-us" },
    { "@value": "画布", "@language": "zh-cn" }
  ]
}
